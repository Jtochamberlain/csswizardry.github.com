<!DOCTYPE html>
<html lang="en-GB" class="page  {{page.page-class }}">

  {% include head.html %}

<body>

    {{ content }}

<script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', function() {
      navigator.serviceWorker.register('/sw.js').then(function(registration) {
        // Successfully registered the Service Worker
        //console.log('Service Worker registration successful with scope: ', registration.scope);
      }).catch(function(err) {
        // Failed to register the Service Worker
        //console.log('Service Worker registration failed: ', err);
      });
    });
  }
</script>

<script>
  performance.measure('HEAD Time', 'HEAD Start', 'HEAD End');
  performance.measure('CSS Time', 'CSS Start', 'CSS End');
  performance.measure('Content Time', 'Content Start', 'Content End');
  console.log(performance.getEntriesByType("mark"));
  console.log(performance.getEntriesByType("measure"));
</script>

<script src="/js/instant.page.5.0.1.min.js" type="module"></script>

<script src="/js/web-vitals-0.2.2.min.js" defer></script>
<script>
function sendToGoogleAnalytics({name, delta, id}) {
  // Assumes the global `ga()` function exists, see:
  // https://developers.google.com/analytics/devguides/collection/analyticsjs
  ga('send', 'event', {
    eventCategory: 'Web Vitals',
    eventAction: name,
    // Google Analytics metrics must be integers, so the value is rounded.
    // For CLS the value is first multiplied by 1000 for greater precision
    // (note: increase the multiplier for greater precision if needed).
    eventValue: Math.round(name === 'CLS' ? delta * 1000 : delta),
    // The `id` value will be unique to the current page load. When sending
    // multiple values from the same page (e.g. for CLS), Google Analytics can
    // compute a total by grouping on this ID (note: requires `eventLabel` to
    // be a dimension in your report).
    eventLabel: id,
    // Use a non-interaction event to avoid affecting bounce rate.
    nonInteraction: true,
  });
}
addEventListener('DOMContentLoaded', function() {
  webVitals.getCLS(sendToGoogleAnalytics);
  webVitals.getFID(sendToGoogleAnalytics);
  webVitals.getLCP(sendToGoogleAnalytics);
});
</script>

</body>
</html>
